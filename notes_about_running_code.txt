Download the following files from https://doi.org/10.6084/m9.figshare.14923089 and put in 60mmActiveSi/
acf.mat
FourierMetrics.mat
psf.mat
SimulationSettings.mat
intermediatePsf.mat


The bin thresholds have already been optimized so there is no need to run optimize_thresholds again. optimize_thresholds_3p2keV
Run main_projection_3.m
This script will generate .mat files with psf and acf, then crash when trying to load the sinogram_data file. (This is the expected behavior.)
Then run generate_

---
Run compute_image_dqe to generate dqe cuves as function of thresholds from the simultated sinograms. This needs to be run three times with different ROI settings to generate dqes for the three different ROI sizes
Once the DQEs have been calculated, run main_projection_3 again to generate the plots. Run this with different electronic noise levels, without generating figures, by changing three lines of code. After the change the should look as this (for 3.2 keV noise):
  print_figs = false;
  for eNoiseSigmakeV = [3.2]
  loaded_noise_sweep=load('./electronic_noise_simulations/corr3p2keV.mat');

Run plot_DQE_multiple_noise_levels.m to generate the plot of dqe for multiple noise levels

Also run image_plots_3 which will generate the figures containing reconstructed images.

Note that the numbers in the plot filenames do not agree with their actual numbering in the manuscript, since the plot for multiple noise levels was inserted at a late stage. 


Also note that it's important to run main_projection_3.m before compute_image_dqe.m, so that it can load large_area_1d_acf_sigma_1.6.mat from an existing file. Otherwise the latter file will be generated by compute_image_dqe.m, and this is not the way the file should be generated.
